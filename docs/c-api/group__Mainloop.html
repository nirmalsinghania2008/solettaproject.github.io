<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>Soletta: Mainloop</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Soletta
   </div>
   <div id="projectbrief">Framework for making IoT devices</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Mainloop</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsol__main__callbacks.html">sol_main_callbacks</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsol__mainloop__source__type.html">sol_mainloop_source_type</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gadd66b8cc4b51d380d2bbfd6b5b8325bc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mainloop.html#gadd66b8cc4b51d380d2bbfd6b5b8325bc">SOL_MAIN</a>(CALLBACKS)</td></tr>
<tr class="separator:gadd66b8cc4b51d380d2bbfd6b5b8325bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga54818bc87ca55fe50e3732f52b56e009"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mainloop.html#ga54818bc87ca55fe50e3732f52b56e009">SOL_MAIN_DEFAULT</a>(STARTUP,  SHUTDOWN)</td></tr>
<tr class="separator:ga54818bc87ca55fe50e3732f52b56e009"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga12cabf4e32145c725bb37bf94515d397"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mainloop.html#ga12cabf4e32145c725bb37bf94515d397">sol_argc</a> (void)</td></tr>
<tr class="separator:ga12cabf4e32145c725bb37bf94515d397"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6c32461ea09d229f743728ad7d8f7bf4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mainloop.html#ga6c32461ea09d229f743728ad7d8f7bf4">sol_args_set</a> (int argc, char *argv[])</td></tr>
<tr class="separator:ga6c32461ea09d229f743728ad7d8f7bf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga924fdfbe38b222739c2bc43a63802fac"><td class="memItemLeft" align="right" valign="top">char **&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mainloop.html#ga924fdfbe38b222739c2bc43a63802fac">sol_argv</a> (void)</td></tr>
<tr class="separator:ga924fdfbe38b222739c2bc43a63802fac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga36f2bd42167cd7404bf9fb37f166b1b1"><td class="memItemLeft" align="right" valign="top">struct sol_idle *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mainloop.html#ga36f2bd42167cd7404bf9fb37f166b1b1">sol_idle_add</a> (bool(*cb)(void *data), const void *data)</td></tr>
<tr class="separator:ga36f2bd42167cd7404bf9fb37f166b1b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga52174a18e1548f536eeeb9b83efef90e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mainloop.html#ga52174a18e1548f536eeeb9b83efef90e">sol_idle_del</a> (struct sol_idle *handle)</td></tr>
<tr class="separator:ga52174a18e1548f536eeeb9b83efef90e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2b7881c0cfcf1516e99a57949987425c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mainloop.html#ga2b7881c0cfcf1516e99a57949987425c">sol_init</a> (void)</td></tr>
<tr class="separator:ga2b7881c0cfcf1516e99a57949987425c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad700470b06894111e0110e865d780a96"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mainloop.html#gad700470b06894111e0110e865d780a96">sol_mainloop_default_main</a> (const struct <a class="el" href="structsol__main__callbacks.html">sol_main_callbacks</a> *callbacks, int argc, char *argv[])</td></tr>
<tr class="separator:gad700470b06894111e0110e865d780a96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae7c87e58ab9b387ff7d7ba8c40ee3612"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mainloop.html#gae7c87e58ab9b387ff7d7ba8c40ee3612">sol_mainloop_source_del</a> (struct sol_mainloop_source *handle)</td></tr>
<tr class="separator:gae7c87e58ab9b387ff7d7ba8c40ee3612"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga533d340a0e952abe13c9ab90b31f0ea0"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mainloop.html#ga533d340a0e952abe13c9ab90b31f0ea0">sol_mainloop_source_get_data</a> (const struct sol_mainloop_source *handle)</td></tr>
<tr class="separator:ga533d340a0e952abe13c9ab90b31f0ea0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf15fe1de7bd2ee0d7bb6f2087b488d22"><td class="memItemLeft" align="right" valign="top">struct sol_mainloop_source *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mainloop.html#gaf15fe1de7bd2ee0d7bb6f2087b488d22">sol_mainloop_source_new</a> (const struct <a class="el" href="structsol__mainloop__source__type.html">sol_mainloop_source_type</a> *type, const void *data)</td></tr>
<tr class="separator:gaf15fe1de7bd2ee0d7bb6f2087b488d22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga56c31320e4348c91a719039b5a22dd25"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mainloop.html#ga56c31320e4348c91a719039b5a22dd25">sol_quit</a> (void)</td></tr>
<tr class="separator:ga56c31320e4348c91a719039b5a22dd25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab1deec1c7e4da3b7b8caeafe9369b816"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mainloop.html#gab1deec1c7e4da3b7b8caeafe9369b816">sol_quit_with_code</a> (int return_code)</td></tr>
<tr class="separator:gab1deec1c7e4da3b7b8caeafe9369b816"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga40ef0e2ee61ea7a548c00bbae980408b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mainloop.html#ga40ef0e2ee61ea7a548c00bbae980408b">sol_run</a> (void)</td></tr>
<tr class="separator:ga40ef0e2ee61ea7a548c00bbae980408b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf9fa52b0c849ded3ede3823eb1a90f76"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mainloop.html#gaf9fa52b0c849ded3ede3823eb1a90f76">sol_shutdown</a> (void)</td></tr>
<tr class="separator:gaf9fa52b0c849ded3ede3823eb1a90f76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9d0cd6af9dab4da3002e5cd596ce604f"><td class="memItemLeft" align="right" valign="top">struct sol_timeout *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mainloop.html#ga9d0cd6af9dab4da3002e5cd596ce604f">sol_timeout_add</a> (uint32_t timeout_ms, bool(*cb)(void *data), const void *data)</td></tr>
<tr class="separator:ga9d0cd6af9dab4da3002e5cd596ce604f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae1f45ba3de62603e90903d1214cf834f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Mainloop.html#gae1f45ba3de62603e90903d1214cf834f">sol_timeout_del</a> (struct sol_timeout *handle)</td></tr>
<tr class="separator:gae1f45ba3de62603e90903d1214cf834f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="gadd66b8cc4b51d380d2bbfd6b5b8325bc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SOL_MAIN</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">CALLBACKS</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordtype">int</span> <a class="code" href="oic-client_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[]) {                              \</div>
<div class="line">        return <a class="code" href="group__Mainloop.html#gad700470b06894111e0110e865d780a96">sol_mainloop_default_main</a>(&amp;(CALLBACKS), argc, argv);  \</div>
<div class="line">    }</div>
<div class="ttc" id="oic-client_8c_html_a0ddf1224851353fc92bfbff6f499fa97"><div class="ttname"><a href="oic-client_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a></div><div class="ttdeci">int main(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> oic-client.c:149</div></div>
<div class="ttc" id="group__Mainloop_html_gad700470b06894111e0110e865d780a96"><div class="ttname"><a href="group__Mainloop.html#gad700470b06894111e0110e865d780a96">sol_mainloop_default_main</a></div><div class="ttdeci">int sol_mainloop_default_main(const struct sol_main_callbacks *callbacks, int argc, char *argv[])</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga54818bc87ca55fe50e3732f52b56e009"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SOL_MAIN_DEFAULT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">STARTUP, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">SHUTDOWN&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="structsol__main__callbacks.html">sol_main_callbacks</a> sol_main_callbacks_instance = { \</div>
<div class="line">        SOL_SET_API_VERSION(.<a class="code" href="structsol__main__callbacks.html#a1b12d8781ab6995e80e2a2d1cd78859c">api_version</a> = <a class="code" href="sol-mainloop_8h.html#a45653f989ff9ee4c2a8eeefc03dd088e">SOL_MAIN_CALLBACKS_API_VERSION</a>, ) \</div>
<div class="line">        .<a class="code" href="structsol__main__callbacks.html#a3ab551696469e07aea53ff8738fda596">startup</a> = (STARTUP),                                           \</div>
<div class="line">        .<a class="code" href="linux-micro-init_8c.html#af80085e2fde103b0fcdf58fcab027e47">shutdown</a> = (SHUTDOWN),                                         \</div>
<div class="line">    };                                                                  <a class="code" href="group__Mainloop.html#gadd66b8cc4b51d380d2bbfd6b5b8325bc">\</a></div>
<div class="line"><a class="code" href="group__Mainloop.html#gadd66b8cc4b51d380d2bbfd6b5b8325bc">    SOL_MAIN</a>(sol_main_callbacks_instance)</div>
<div class="ttc" id="group__Mainloop_html_gadd66b8cc4b51d380d2bbfd6b5b8325bc"><div class="ttname"><a href="group__Mainloop.html#gadd66b8cc4b51d380d2bbfd6b5b8325bc">SOL_MAIN</a></div><div class="ttdeci">#define SOL_MAIN(CALLBACKS)</div><div class="ttdef"><b>Definition:</b> sol-mainloop.h:598</div></div>
<div class="ttc" id="structsol__main__callbacks_html_a1b12d8781ab6995e80e2a2d1cd78859c"><div class="ttname"><a href="structsol__main__callbacks.html#a1b12d8781ab6995e80e2a2d1cd78859c">sol_main_callbacks::api_version</a></div><div class="ttdeci">uint16_t api_version</div><div class="ttdef"><b>Definition:</b> sol-mainloop.h:543</div></div>
<div class="ttc" id="structsol__main__callbacks_html_a3ab551696469e07aea53ff8738fda596"><div class="ttname"><a href="structsol__main__callbacks.html#a3ab551696469e07aea53ff8738fda596">sol_main_callbacks::startup</a></div><div class="ttdeci">void(* startup)(void)</div><div class="ttdef"><b>Definition:</b> sol-mainloop.h:546</div></div>
<div class="ttc" id="linux-micro-init_8c_html_af80085e2fde103b0fcdf58fcab027e47"><div class="ttname"><a href="linux-micro-init_8c.html#af80085e2fde103b0fcdf58fcab027e47">shutdown</a></div><div class="ttdeci">static void shutdown(void)</div><div class="ttdef"><b>Definition:</b> linux-micro-init.c:190</div></div>
<div class="ttc" id="structsol__main__callbacks_html"><div class="ttname"><a href="structsol__main__callbacks.html">sol_main_callbacks</a></div><div class="ttdef"><b>Definition:</b> sol-mainloop.h:540</div></div>
<div class="ttc" id="sol-mainloop_8h_html_a45653f989ff9ee4c2a8eeefc03dd088e"><div class="ttname"><a href="sol-mainloop_8h.html#a45653f989ff9ee4c2a8eeefc03dd088e">SOL_MAIN_CALLBACKS_API_VERSION</a></div><div class="ttdeci">#define SOL_MAIN_CALLBACKS_API_VERSION</div><div class="ttdef"><b>Definition:</b> sol-mainloop.h:542</div></div>
</div><!-- fragment --><p>Preferred entry point for Soletta applications.</p>
<p>Different platforms may have different ways in which an application is started, so in order to remain portable, Soletta applications should avoid using platform specific main functions.</p>
<p>SOL_MAIN_DEFAULT will be defined to something that makes sense for the target platform, ensuring that Soletta is properly initialized before calling the provided <em>startup</em> function, where all of the application specific initialization must take place. If they make sense, command line arguments will have been set and can be retrieved with <a class="el" href="group__Mainloop.html#ga12cabf4e32145c725bb37bf94515d397">sol_argc()</a> and <a class="el" href="group__Mainloop.html#ga924fdfbe38b222739c2bc43a63802fac">sol_argv()</a>.</p>
<p>After <em>startup</em> is called, the main loop will start, and once that finishes, the <em>shutdown</em> function, if provided, will be called to perform any necessary termination procedures by the application, before Soletta itself is shutdown and the program terminated. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga12cabf4e32145c725bb37bf94515d397"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sol_argc </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets the argument count the application was launched with, if any.</p>
<dl class="section return"><dt>Returns</dt><dd>The <code>argc</code> value as set by <a class="el" href="group__Mainloop.html#ga6c32461ea09d229f743728ad7d8f7bf4">sol_args_set()</a> or <a class="el" href="group__Mainloop.html#gadd66b8cc4b51d380d2bbfd6b5b8325bc">SOL_MAIN()</a>. </dd></dl>

<p>Referenced by <a class="el" href="linux-micro-init_8c.html#a110a30bfddfe94076b165c6f84da57be">parse_cmdline_pin()</a>, <a class="el" href="md5sum_8c.html#a8f65ca9f5a72be7fe776126fc632f8a9">startup()</a>, and <a class="el" href="server_8c.html#a01f52f14b9e6dd3c57b905c4db4213bf">startup_server()</a>.</p>

</div>
</div>
<a class="anchor" id="ga6c32461ea09d229f743728ad7d8f7bf4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sol_args_set </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets a new list of arguments and its count.</p>
<p>A reference to the <em>argv</em> pointer will be kept, so it must be valid at least until <a class="el" href="group__Mainloop.html#ga6c32461ea09d229f743728ad7d8f7bf4">sol_args_set()</a> is called again to set different arguments. This function is useful in cases where the main application may have arguments to handle and others that need to be passed forward to other sub-systems. For example, the flow systems has node types to retrieve the arguments the application was started with, and these may differ if the application is run as an FBP script, or as a compiled binary, so the FBP interpreter removes its own arguments and uses this function to set the list of arguments that the flow should see.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>The count of elements in <em>argv</em>. </td></tr>
    <tr><td class="paramname">argv</td><td>Array of nul terminated strings, each represents one argument. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga924fdfbe38b222739c2bc43a63802fac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char** sol_argv </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets the list of arguments the application was launched with, if any.</p>
<dl class="section return"><dt>Returns</dt><dd>The <code>argv</code> value as set by <a class="el" href="group__Mainloop.html#ga6c32461ea09d229f743728ad7d8f7bf4">sol_args_set()</a> or <a class="el" href="group__Mainloop.html#gadd66b8cc4b51d380d2bbfd6b5b8325bc">SOL_MAIN()</a>. </dd></dl>

<p>Referenced by <a class="el" href="linux-micro-init_8c.html#a110a30bfddfe94076b165c6f84da57be">parse_cmdline_pin()</a>, <a class="el" href="md5sum_8c.html#a8f65ca9f5a72be7fe776126fc632f8a9">startup()</a>, and <a class="el" href="server_8c.html#a01f52f14b9e6dd3c57b905c4db4213bf">startup_server()</a>.</p>

</div>
</div>
<a class="anchor" id="ga36f2bd42167cd7404bf9fb37f166b1b1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct sol_idle* sol_idle_add </td>
          <td>(</td>
          <td class="paramtype">bool(*)(void *data)&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Adds a function to be called when the application goes idle.</p>
<p>Idlers are called when the main loop reaches the idle state. That is, after all pending events have been processed and no timeout has expired. This means that if there's always something to do, an idler function may never be called. Like timeouts, if an idler function returns false, it will be automatically removed, otherwise they will kept to be called until some other event becomes available.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cb</td><td>The function to call when the idle state is reached. </td></tr>
    <tr><td class="paramname">data</td><td>The user data pointer to pass to the function.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A handle that can be used to delete the idler. </dd></dl>

</div>
</div>
<a class="anchor" id="ga52174a18e1548f536eeeb9b83efef90e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sol_idle_del </td>
          <td>(</td>
          <td class="paramtype">struct sol_idle *&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deletes the given idler.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>The idler to delete.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the idler was deleted, false if the handle is invalid or if it had been marked as removed already. </dd></dl>

</div>
</div>
<a class="anchor" id="ga2b7881c0cfcf1516e99a57949987425c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sol_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="oic-client_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main()</a>, and <a class="el" href="sol-glib-integration_8h.html#a553d7b6d8ae54523ff4faaef143cc237">sol_glib_integration()</a>.</p>

</div>
</div>
<a class="anchor" id="gad700470b06894111e0110e865d780a96"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sol_mainloop_default_main </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structsol__main__callbacks.html">sol_main_callbacks</a> *&#160;</td>
          <td class="paramname"><em>callbacks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="gae7c87e58ab9b387ff7d7ba8c40ee3612"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sol_mainloop_source_del </td>
          <td>(</td>
          <td class="paramtype">struct sol_mainloop_source *&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Destroy a source of main loop events.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>a valid handle previously created with <a class="el" href="group__Mainloop.html#gaf15fe1de7bd2ee0d7bb6f2087b488d22">sol_mainloop_source_new()</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__Mainloop.html#gaf15fe1de7bd2ee0d7bb6f2087b488d22">sol_mainloop_source_new()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ga533d340a0e952abe13c9ab90b31f0ea0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* sol_mainloop_source_get_data </td>
          <td>(</td>
          <td class="paramtype">const struct sol_mainloop_source *&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Retrieve the user data (context) given to the source at creation time.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>a valid handle previously created with <a class="el" href="group__Mainloop.html#gaf15fe1de7bd2ee0d7bb6f2087b488d22">sol_mainloop_source_new()</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>whatever was given to <a class="el" href="group__Mainloop.html#gaf15fe1de7bd2ee0d7bb6f2087b488d22">sol_mainloop_source_new()</a> as second parameter. NULL is a valid return.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__Mainloop.html#gaf15fe1de7bd2ee0d7bb6f2087b488d22">sol_mainloop_source_new()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="gaf15fe1de7bd2ee0d7bb6f2087b488d22"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct sol_mainloop_source* sol_mainloop_source_new </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structsol__mainloop__source__type.html">sol_mainloop_source_type</a> *&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a new source of events to the main loop.</p>
<p>Some libraries will have their own internal main loop, in the case we should integrate them with Soletta's we do so by adding a new source of events to Soletta's main loop.</p>
<p>The source is described by its <em>type</em>, a set of functions to be called back at various phases:</p>
<ul>
<li><b>prepare</b> called before all other callbacks at each main loop iteration.</li>
</ul>
<ul>
<li><b>get_next_timeout</b> called before configuring the maximum timeout to wait for events. The smallest value of all sources and the first timeout of Soletta's will be used to determine the value to use (ie: the one to give to poll(2) if using posix main loop). If returns <code>false</code> the main loop can sleep forever. If not provided, then return <code>false</code> is assumed.</li>
</ul>
<ul>
<li><b>check</b> called after all event sources and Soletta's internal events are polled and are ready to be dispatched. If it returns <code>true</code>, then there are events to be dispatched in this source.</li>
</ul>
<ul>
<li><b>dispatch</b> called if <code>check()</code> returns <code>true</code>.</li>
</ul>
<ul>
<li><code>dispose</code> called when the source is deleted. This will happen at <a class="el" href="group__Mainloop.html#gaf9fa52b0c849ded3ede3823eb1a90f76">sol_shutdown()</a> if the source is not manually deleted.</li>
</ul>
<p>If a source doesn't know the time for the next event (say an interruption service handler or an internal file descriptor), then further integration work needs to be done. The interruption service handler can use <a class="el" href="group__Mainloop.html#ga9d0cd6af9dab4da3002e5cd596ce604f">sol_timeout_add()</a> from a thread to schedule a main loop wake, that in turn will run the source's prepare() automatically. Analogously, the internal file descriptors can be added to soletta's at prepare(). If the main loop uses epoll(), that fd can be added to chain the monitoring.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>the description of the source of main loop events. This pointer is not modified and is <b>not</b> copied, thus it <b>must</b> exist during the lifetime of the source. </td></tr>
    <tr><td class="paramname">data</td><td>the user data (context) to give to callbacks in <em>type</em>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the new main loop source instance or <code>NULL</code> on failure.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__Mainloop.html#gae7c87e58ab9b387ff7d7ba8c40ee3612">sol_mainloop_source_del()</a> </dd></dl>

<p>Referenced by <a class="el" href="sol-glib-integration_8h.html#a553d7b6d8ae54523ff4faaef143cc237">sol_glib_integration()</a>.</p>

</div>
</div>
<a class="anchor" id="ga56c31320e4348c91a719039b5a22dd25"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sol_quit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Terminates the main loop.</p>
<p>Stops the main loop and sets the return value of <a class="el" href="group__Mainloop.html#ga40ef0e2ee61ea7a548c00bbae980408b">sol_run()</a> to EXIT_SUCCESS. </p>

<p>Referenced by <a class="el" href="message-digest_8c.html#aba0408da6b1969a990e9e82ed7bfc7fa">on_digest_ready()</a>, <a class="el" href="md5sum_8c.html#a8f65ca9f5a72be7fe776126fc632f8a9">startup()</a>, <a class="el" href="md5sum_8c.html#ab94c68210a66948eef1c1b30ad8cd870">store_digest()</a>, and <a class="el" href="uart_8c.html#a66c2f5824ec723526531dd975a16028f">uart_rx()</a>.</p>

</div>
</div>
<a class="anchor" id="gab1deec1c7e4da3b7b8caeafe9369b816"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sol_quit_with_code </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>return_code</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Terminates the main loop, setting a specific return code.</p>
<p>Stops the main loop and sets the return value of <a class="el" href="group__Mainloop.html#ga40ef0e2ee61ea7a548c00bbae980408b">sol_run()</a> to <em>return_code</em>. Usually used to indicate that the application should end with an error.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">return_code</td><td>The exit code that <a class="el" href="group__Mainloop.html#ga40ef0e2ee61ea7a548c00bbae980408b">sol_run()</a> will return. </td></tr>
  </table>
  </dd>
</dl>

<p>Referenced by <a class="el" href="server_8c.html#ae15b6636fe22ea3bfcca92f512cbf3db">on_stdin()</a>, <a class="el" href="md5sum_8c.html#afc7855e4b6972e4d50f909d42dd67776">on_stdin_hash()</a>, <a class="el" href="client_8c.html#a7d9397a4a9d1f92ef9f9e3c17ef355c0">response_cb()</a>, <a class="el" href="download_8c.html#a78df6c1f03dafbd44529d7ff95388d72">response_func()</a>, <a class="el" href="md5sum_8c.html#a8f65ca9f5a72be7fe776126fc632f8a9">startup()</a>, and <a class="el" href="server_8c.html#a01f52f14b9e6dd3c57b905c4db4213bf">startup_server()</a>.</p>

</div>
</div>
<a class="anchor" id="ga40ef0e2ee61ea7a548c00bbae980408b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sol_run </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Runs the main loop.</p>
<p>This function executes the main loop and it will return only after <a class="el" href="group__Mainloop.html#ga56c31320e4348c91a719039b5a22dd25">sol_quit()</a> or <a class="el" href="group__Mainloop.html#gab1deec1c7e4da3b7b8caeafe9369b816">sol_quit_with_code()</a> is called. The return value is the return code passed to <a class="el" href="group__Mainloop.html#gab1deec1c7e4da3b7b8caeafe9369b816">sol_quit_with_code()</a>.</p>
<dl class="section return"><dt>Returns</dt><dd>The value passed to <a class="el" href="group__Mainloop.html#gab1deec1c7e4da3b7b8caeafe9369b816">sol_quit_with_code()</a>, or EXIT_SUCCESS if terminated by <a class="el" href="group__Mainloop.html#ga56c31320e4348c91a719039b5a22dd25">sol_quit()</a>. </dd></dl>

<p>Referenced by <a class="el" href="oic-client_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main()</a>.</p>

</div>
</div>
<a class="anchor" id="gaf9fa52b0c849ded3ede3823eb1a90f76"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sol_shutdown </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="platform-simple_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main()</a>.</p>

</div>
</div>
<a class="anchor" id="ga9d0cd6af9dab4da3002e5cd596ce604f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct sol_timeout* sol_timeout_add </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>timeout_ms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool(*)(void *data)&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Adds a function to be called periodically by the main loop.</p>
<p>Timeouts are called by the main loop every <em>timeout_ms</em> milliseconds for as long as the given function <em>cb</em> returns true.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timeout_ms</td><td>The period in milliseconds in which the function will be called. </td></tr>
    <tr><td class="paramname">cb</td><td>The function to call, it will be called every <code>timeout_ms</code> until it returns false. </td></tr>
    <tr><td class="paramname">data</td><td>The user data pointer to pass to the function.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A handle that can be used to delete the timeout. </dd></dl>

<p>Referenced by <a class="el" href="simple-server_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main()</a>, <a class="el" href="simplectype_8c.html#a8dcfbf8539cb25d4c3fc454422d4844c">mytype_func()</a>, <a class="el" href="mqtt-publish_8c.html#a1acc0f3aeec79b18fc37e22325ccfd09">on_connect()</a>, <a class="el" href="mqtt-publish_8c.html#a25d4c856d51fc100d3c713852e4849b1">on_disconnect()</a>, <a class="el" href="custom-node-types_8c.html#af79cdfdfa38ebadd5b21d8d495cbf82a">reader_open()</a>, and <a class="el" href="linux-micro-init_8c.html#a8f65ca9f5a72be7fe776126fc632f8a9">startup()</a>.</p>

</div>
</div>
<a class="anchor" id="gae1f45ba3de62603e90903d1214cf834f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sol_timeout_del </td>
          <td>(</td>
          <td class="paramtype">struct sol_timeout *&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deletes the given timeout.</p>
<p>If it's necessary to keep a created timeout from being called, this function can delete it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>The timeout to delete.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the timeout was deleted, false if the handle is invalid or if it had been marked as removed already. </dd></dl>

<p>Referenced by <a class="el" href="platform-simple_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main()</a>, <a class="el" href="simplectype_8c.html#a8dcfbf8539cb25d4c3fc454422d4844c">mytype_func()</a>, <a class="el" href="custom-node-types_8c.html#a684d29532064295017bf1c2b5354268f">reader_close()</a>, and <a class="el" href="linux-micro-init_8c.html#af80085e2fde103b0fcdf58fcab027e47">shutdown()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
