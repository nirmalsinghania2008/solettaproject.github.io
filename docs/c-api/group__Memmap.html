<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Soletta: Memmap</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Soletta
   </div>
   <div id="projectbrief">Framework for making IoT devices</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Memmap<div class="ingroups"><a class="el" href="group__IO.html">I/O</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsol__memmap__entry.html">sol_memmap_entry</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsol__memmap__map.html">sol_memmap_map</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga5af4c642e5f47a8ca744cd283df63ae4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Memmap.html#ga5af4c642e5f47a8ca744cd283df63ae4">CREATE_BLOB</a>(_val)</td></tr>
<tr class="separator:ga5af4c642e5f47a8ca744cd283df63ae4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2c69b56114a4e8a15b41a79c93df1e27"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Memmap.html#ga2c69b56114a4e8a15b41a79c93df1e27">CREATE_BUFFER</a>(_val)</td></tr>
<tr class="separator:ga2c69b56114a4e8a15b41a79c93df1e27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf4112fc962b5f6c20bb6359b2549d6a3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Memmap.html#gaf4112fc962b5f6c20bb6359b2549d6a3">MEMMAP_VERSION_ENTRY</a>&#160;&#160;&#160;&quot;_version&quot;</td></tr>
<tr class="separator:gaf4112fc962b5f6c20bb6359b2549d6a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9df7e2cc0a91067ee0852c1bec11e48c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Memmap.html#ga9df7e2cc0a91067ee0852c1bec11e48c">SOL_MEMMAP_BOOL_ENTRY</a>(_name, _offset, _bit_offset)&#160;&#160;&#160;<a class="el" href="group__Memmap.html#ga6ab15be1378e62dfa3e8e1115f9c40ad">SOL_MEMMAP_ENTRY_BIT_SIZE</a>(_name, _offset, 1, _bit_offset, 1)</td></tr>
<tr class="separator:ga9df7e2cc0a91067ee0852c1bec11e48c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae1b8dab02551b3ecf3577af51c00fc03"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Memmap.html#gae1b8dab02551b3ecf3577af51c00fc03">SOL_MEMMAP_ENTRY</a>(_name, _offset, _size)&#160;&#160;&#160;<a class="el" href="group__Memmap.html#ga6ab15be1378e62dfa3e8e1115f9c40ad">SOL_MEMMAP_ENTRY_BIT_SIZE</a>(_name, _offset, _size, 0, 0)</td></tr>
<tr class="separator:gae1b8dab02551b3ecf3577af51c00fc03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6ab15be1378e62dfa3e8e1115f9c40ad"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Memmap.html#ga6ab15be1378e62dfa3e8e1115f9c40ad">SOL_MEMMAP_ENTRY_BIT_SIZE</a>(_name, _offset, _size, _bit_offset, _bit_size)&#160;&#160;&#160;static struct <a class="el" href="structsol__memmap__entry.html">sol_memmap_entry</a> _name = { .offset = (_offset), .size = (_size), .bit_offset = (_bit_offset), .bit_size = (_bit_size) }</td></tr>
<tr class="separator:ga6ab15be1378e62dfa3e8e1115f9c40ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga6b37d705d7879ef4d77e5d67d9e3a4a6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Memmap.html#ga6b37d705d7879ef4d77e5d67d9e3a4a6">sol_memmap_add_map</a> (const struct <a class="el" href="structsol__memmap__map.html">sol_memmap_map</a> *<a class="el" href="structmap.html">map</a>)</td></tr>
<tr class="separator:ga6b37d705d7879ef4d77e5d67d9e3a4a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6f10a6647dce619f9719642b51efa9b7"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Memmap.html#ga6f10a6647dce619f9719642b51efa9b7">sol_memmap_get_timeout</a> (const struct <a class="el" href="structsol__memmap__map.html">sol_memmap_map</a> *<a class="el" href="structmap.html">map</a>)</td></tr>
<tr class="separator:ga6f10a6647dce619f9719642b51efa9b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9628cb949e6e20b569b611e17e2ff6e8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Memmap.html#ga9628cb949e6e20b569b611e17e2ff6e8">sol_memmap_read_raw</a> (const char *<a class="el" href="sol-fbp-runner_2main_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, struct <a class="el" href="structsol__buffer.html">sol_buffer</a> *buffer)</td></tr>
<tr class="separator:ga9628cb949e6e20b569b611e17e2ff6e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga46c71586543543114988251702ed0bc4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Memmap.html#ga46c71586543543114988251702ed0bc4">sol_memmap_remove_map</a> (const struct <a class="el" href="structsol__memmap__map.html">sol_memmap_map</a> *<a class="el" href="structmap.html">map</a>)</td></tr>
<tr class="separator:ga46c71586543543114988251702ed0bc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4b8ee0e4f5aaa80fac4836564552f207"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Memmap.html#ga4b8ee0e4f5aaa80fac4836564552f207">sol_memmap_set_timeout</a> (struct <a class="el" href="structsol__memmap__map.html">sol_memmap_map</a> *<a class="el" href="structmap.html">map</a>, unsigned int timeout)</td></tr>
<tr class="separator:ga4b8ee0e4f5aaa80fac4836564552f207"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga232e909a65528eb0a896713bcb736d73"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Memmap.html#ga232e909a65528eb0a896713bcb736d73">sol_memmap_write_raw</a> (const char *<a class="el" href="sol-fbp-runner_2main_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, struct <a class="el" href="structsol__blob.html">sol_blob</a> *blob, void(*cb)(void *data, const char *<a class="el" href="sol-fbp-runner_2main_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, struct <a class="el" href="structsol__blob.html">sol_blob</a> *blob, int status), const void *data)</td></tr>
<tr class="separator:ga232e909a65528eb0a896713bcb736d73"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Memory mapped persistence storage (like NVRAM or EEPROM) API on Soletta.</p>
<p>A map must be provided, either directly via <code>sol_memmap_add_map</code> or by informing a JSON file to Soletta runner or generator. This map needs to contain a property <code>_version</code> (<code>MEMMAP_VERSION_ENTRY</code>), which will store version of map stored. This API will refuse to work if stored map is different from map version. Note that <code>_version</code> field is a <code>uint8_t</code> and that versions should start on 1, so Soletta will know if dealing with a totally new storage. It also considers 255 (0xff) as a non-value, so fit new EEPROMs. Note that a map may define a timeout value to perform writes. This way, writings can be grouped together, as all writing operations will be performed at timeout end. That said, it's important to note that when writing is performed, no order is guaranteed for different keys, i.e., writing to 'a' and 'b' can be performed, at timeout end, as 'b' and 'a'</p>
<ul>
<li>but for a given key, only the last write will be performed at timeout end. Multiple writes for the same key before timeout end will result in previous writes being replaced, and their callbacks will be informed with status -ECANCELED. </li>
</ul>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga5af4c642e5f47a8ca744cd283df63ae4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CREATE_BLOB</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_val</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keyword">struct </span><a class="code" href="structsol__blob.html">sol_blob</a> *blob; \</div>
<div class="line">    size_t _s = <span class="keyword">sizeof</span>(*_val); \</div>
<div class="line">    void *v = <a class="code" href="sol-util_8c.html#a7793fa5208d5fc1ff3f2a25e06ab34d8">sol_util_memdup</a>(_val, _s); <a class="code" href="group__Log.html#gacb48844cf78438b772f069c089836835">\</a></div>
<div class="line"><a class="code" href="group__Log.html#gacb48844cf78438b772f069c089836835">    SOL_NULL_CHECK</a>(v, -EINVAL); \</div>
<div class="line">    blob = <a class="code" href="group__Types.html#ga42c9abd2ff9950e7ac828c313fb758c9">sol_blob_new</a>(<a class="code" href="group__Types.html#ga8b75cb9fdaea374a9e0c35b285bf25ca">SOL_BLOB_TYPE_DEFAULT</a>, NULL, v, _s); \</div>
<div class="line">    if (!blob) { \</div>
<div class="line">        free(v); \</div>
<div class="line">        return -EINVAL; \</div>
<div class="line">    }</div>
<div class="ttc" id="group__Log_html_gacb48844cf78438b772f069c089836835"><div class="ttname"><a href="group__Log.html#gacb48844cf78438b772f069c089836835">SOL_NULL_CHECK</a></div><div class="ttdeci">#define SOL_NULL_CHECK(ptr,...)</div><div class="ttdef"><b>Definition:</b> sol-log.h:77</div></div>
<div class="ttc" id="group__Types_html_ga42c9abd2ff9950e7ac828c313fb758c9"><div class="ttname"><a href="group__Types.html#ga42c9abd2ff9950e7ac828c313fb758c9">sol_blob_new</a></div><div class="ttdeci">struct sol_blob * sol_blob_new(const struct sol_blob_type *type, struct sol_blob *parent, const void *mem, size_t size)</div><div class="ttdef"><b>Definition:</b> sol-blob.c:86</div></div>
<div class="ttc" id="sol-util_8c_html_a7793fa5208d5fc1ff3f2a25e06ab34d8"><div class="ttname"><a href="sol-util_8c.html#a7793fa5208d5fc1ff3f2a25e06ab34d8">sol_util_memdup</a></div><div class="ttdeci">void * sol_util_memdup(const void *data, size_t len)</div><div class="ttdef"><b>Definition:</b> sol-util.c:79</div></div>
<div class="ttc" id="structsol__blob_html"><div class="ttname"><a href="structsol__blob.html">sol_blob</a></div><div class="ttdef"><b>Definition:</b> sol-types.h:243</div></div>
<div class="ttc" id="group__Types_html_ga8b75cb9fdaea374a9e0c35b285bf25ca"><div class="ttname"><a href="group__Types.html#ga8b75cb9fdaea374a9e0c35b285bf25ca">SOL_BLOB_TYPE_DEFAULT</a></div><div class="ttdeci">const struct sol_blob_type * SOL_BLOB_TYPE_DEFAULT</div><div class="ttdef"><b>Definition:</b> sol-blob.c:184</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ga2c69b56114a4e8a15b41a79c93df1e27"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CREATE_BUFFER</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_val</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keyword">struct </span><a class="code" href="structsol__buffer.html">sol_buffer</a> buf = <a class="code" href="group__Buffer.html#ga96e446114bb7fb039ea7b455f98dee83">SOL_BUFFER_INIT_FLAGS</a>(_val, \</div>
<div class="line">    <span class="keyword">sizeof</span>(*(_val)), <a class="code" href="group__Buffer.html#ggaa7349ebf92ae19e234119719eb74e9beafbf886ed07e5a1ae10f429d9fcfedb5f">SOL_BUFFER_FLAGS_MEMORY_NOT_OWNED</a> | <a class="code" href="group__Buffer.html#ggaa7349ebf92ae19e234119719eb74e9beafd1d0f37242c92450c0e596c17a80dc8">SOL_BUFFER_FLAGS_NO_NUL_BYTE</a>);</div>
<div class="ttc" id="group__Buffer_html_ggaa7349ebf92ae19e234119719eb74e9beafbf886ed07e5a1ae10f429d9fcfedb5f"><div class="ttname"><a href="group__Buffer.html#ggaa7349ebf92ae19e234119719eb74e9beafbf886ed07e5a1ae10f429d9fcfedb5f">SOL_BUFFER_FLAGS_MEMORY_NOT_OWNED</a></div><div class="ttdef"><b>Definition:</b> sol-buffer.h:102</div></div>
<div class="ttc" id="group__Buffer_html_ga96e446114bb7fb039ea7b455f98dee83"><div class="ttname"><a href="group__Buffer.html#ga96e446114bb7fb039ea7b455f98dee83">SOL_BUFFER_INIT_FLAGS</a></div><div class="ttdeci">#define SOL_BUFFER_INIT_FLAGS(data_, size_, flags_)</div><div class="ttdef"><b>Definition:</b> sol-buffer.h:126</div></div>
<div class="ttc" id="structsol__buffer_html"><div class="ttname"><a href="structsol__buffer.html">sol_buffer</a></div><div class="ttdef"><b>Definition:</b> sol-buffer.h:109</div></div>
<div class="ttc" id="group__Buffer_html_ggaa7349ebf92ae19e234119719eb74e9beafd1d0f37242c92450c0e596c17a80dc8"><div class="ttname"><a href="group__Buffer.html#ggaa7349ebf92ae19e234119719eb74e9beafd1d0f37242c92450c0e596c17a80dc8">SOL_BUFFER_FLAGS_NO_NUL_BYTE</a></div><div class="ttdef"><b>Definition:</b> sol-buffer.h:106</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="gaf4112fc962b5f6c20bb6359b2549d6a3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MEMMAP_VERSION_ENTRY&#160;&#160;&#160;&quot;_version&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Name of property which contains stored map version </p>

</div>
</div>
<a class="anchor" id="ga9df7e2cc0a91067ee0852c1bec11e48c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SOL_MEMMAP_BOOL_ENTRY</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_name, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_offset, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_bit_offset&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="group__Memmap.html#ga6ab15be1378e62dfa3e8e1115f9c40ad">SOL_MEMMAP_ENTRY_BIT_SIZE</a>(_name, _offset, 1, _bit_offset, 1)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="gae1b8dab02551b3ecf3577af51c00fc03"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SOL_MEMMAP_ENTRY</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_name, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_offset, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_size&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="group__Memmap.html#ga6ab15be1378e62dfa3e8e1115f9c40ad">SOL_MEMMAP_ENTRY_BIT_SIZE</a>(_name, _offset, _size, 0, 0)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ga6ab15be1378e62dfa3e8e1115f9c40ad"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SOL_MEMMAP_ENTRY_BIT_SIZE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_name, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_offset, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_size, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_bit_offset, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_bit_size&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;static struct <a class="el" href="structsol__memmap__entry.html">sol_memmap_entry</a> _name = { .offset = (_offset), .size = (_size), .bit_offset = (_bit_offset), .bit_size = (_bit_size) }</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga6b37d705d7879ef4d77e5d67d9e3a4a6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sol_memmap_add_map </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structsol__memmap__map.html">sol_memmap_map</a> *&#160;</td>
          <td class="paramname"><em>map</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Add a map to internal list of available maps.</p>
<p>As Soletta will keep a reference to this map, it should be kept alive during memmap usage.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">map</td><td>map to be add.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, a negative number on failure. </dd></dl>

<p>References <a class="el" href="structsol__vector.html#ac27a1163cfe3c9ba8d4229a04ebbada5">sol_vector::len</a>, <a class="el" href="structmap__internal.html#aea82b1a67a8ef212cb9ae74456611681">map_internal::map</a>, <a class="el" href="structsol__memmap__map.html#a513aa23470f24597cb4b672518f5a6c3">sol_memmap_map::path</a>, <a class="el" href="structmap__internal.html#a56276603b01f715800c5f6021216ceb2">map_internal::pending_writes</a>, <a class="el" href="structmap__internal.html#a89ebef6fc655539f7cb35f1ba33b5696">map_internal::resolved_path</a>, <a class="el" href="group__Log.html#gacb48844cf78438b772f069c089836835">SOL_NULL_CHECK</a>, <a class="el" href="group__Log.html#ga54e82836a0158b537774689043b0fb75">SOL_NULL_CHECK_GOTO</a>, <a class="el" href="group__Vector.html#ga6ed33ed4bd0de3c0d4714c1fc53dd3b8">sol_vector_append()</a>, <a class="el" href="group__Vector.html#ga0ae8dd222f4805369d43afc8e3138ca9">sol_vector_del()</a>, <a class="el" href="group__Vector.html#gaa685449595173af183e36882ec689771">sol_vector_init()</a>, and <a class="el" href="group__Log.html#ga5d9529e9746395acc2cd96a28ffa1c28">SOL_WRN</a>.</p>

</div>
</div>
<a class="anchor" id="ga6f10a6647dce619f9719642b51efa9b7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int sol_memmap_get_timeout </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structsol__memmap__map.html">sol_memmap_map</a> *&#160;</td>
          <td class="paramname"><em>map</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>References <a class="el" href="structmap__internal.html#aea82b1a67a8ef212cb9ae74456611681">map_internal::map</a>, <a class="el" href="group__Log.html#gacb48844cf78438b772f069c089836835">SOL_NULL_CHECK</a>, <a class="el" href="group__Vector.html#gab02e3bf71600e6bd83fb26fc83935849">SOL_VECTOR_FOREACH_IDX</a>, <a class="el" href="group__Log.html#ga5d9529e9746395acc2cd96a28ffa1c28">SOL_WRN</a>, and <a class="el" href="structsol__memmap__map.html#aa9d1cddaf725d0d591a02bafddb32179">sol_memmap_map::timeout</a>.</p>

</div>
</div>
<a class="anchor" id="ga9628cb949e6e20b569b611e17e2ff6e8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sol_memmap_read_raw </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structsol__buffer.html">sol_buffer</a> *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read storage contents to buffer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>name of property. must be present in one of maps previoulsy added via <code>sol_memmap_add_map</code> (if present in more than one, behaviour is undefined) </td></tr>
    <tr><td class="paramname">buffer</td><td>buffer where result will be read into, according to its entry on map.</td></tr>
  </table>
  </dd>
</dl>
<p>return 0 on success, a negative number on failure </p>

<p>References <a class="el" href="structmap__internal.html#a89ebef6fc655539f7cb35f1ba33b5696">map_internal::resolved_path</a>, <a class="el" href="group__Log.html#gacb48844cf78438b772f069c089836835">SOL_NULL_CHECK</a>, and <a class="el" href="group__Log.html#ga5d9529e9746395acc2cd96a28ffa1c28">SOL_WRN</a>.</p>

</div>
</div>
<a class="anchor" id="ga46c71586543543114988251702ed0bc4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sol_memmap_remove_map </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structsol__memmap__map.html">sol_memmap_map</a> *&#160;</td>
          <td class="paramname"><em>map</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Removes a previously added map from internal list of available maps.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">map</td><td>map to be removed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, a negative number on failure. </dd></dl>

<p>References <a class="el" href="structmap__internal.html#aea82b1a67a8ef212cb9ae74456611681">map_internal::map</a>, <a class="el" href="group__Log.html#gacb48844cf78438b772f069c089836835">SOL_NULL_CHECK</a>, <a class="el" href="group__Mainloop.html#gae1f45ba3de62603e90903d1214cf834f">sol_timeout_del()</a>, <a class="el" href="group__Vector.html#ga0ae8dd222f4805369d43afc8e3138ca9">sol_vector_del()</a>, <a class="el" href="group__Vector.html#gab02e3bf71600e6bd83fb26fc83935849">SOL_VECTOR_FOREACH_IDX</a>, and <a class="el" href="structmap__internal.html#aac701633d88d7033fd6f929d0a22e065">map_internal::timeout</a>.</p>

</div>
</div>
<a class="anchor" id="ga4b8ee0e4f5aaa80fac4836564552f207"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sol_memmap_set_timeout </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structsol__memmap__map.html">sol_memmap_map</a> *&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Defines map timeout to actually perform write.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">map</td><td>map to have its timeout changed </td></tr>
    <tr><td class="paramname">timeout</td><td>new timeout, in milliseconds.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if successfuly set map timeout.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This change will take effect after current active timer expires. Active ones will remain unchanged </dd></dl>

<p>References <a class="el" href="structmap__internal.html#aea82b1a67a8ef212cb9ae74456611681">map_internal::map</a>, <a class="el" href="group__Log.html#gacb48844cf78438b772f069c089836835">SOL_NULL_CHECK</a>, <a class="el" href="group__Vector.html#gab02e3bf71600e6bd83fb26fc83935849">SOL_VECTOR_FOREACH_IDX</a>, <a class="el" href="group__Log.html#ga5d9529e9746395acc2cd96a28ffa1c28">SOL_WRN</a>, <a class="el" href="structmap__internal.html#aac701633d88d7033fd6f929d0a22e065">map_internal::timeout</a>, and <a class="el" href="structsol__memmap__map.html#aa9d1cddaf725d0d591a02bafddb32179">sol_memmap_map::timeout</a>.</p>

</div>
</div>
<a class="anchor" id="ga232e909a65528eb0a896713bcb736d73"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int sol_memmap_write_raw </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structsol__blob.html">sol_blob</a> *&#160;</td>
          <td class="paramname"><em>blob</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(void *data, const char *<a class="el" href="sol-fbp-runner_2main_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, struct <a class="el" href="structsol__blob.html">sol_blob</a> *blob, int status)&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Writes buffer contents to storage.</p>
<p>Note that as writing operations are asynchronous, to check if it completely succeded, one needs to register a callback that will inform writing result. A negative status on callback means failure; -ECANCELED for instance, means that another write to the same property took place before this one was completed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>name of property. must be present in one of maps previoulsy added via <code>sol_memmap_add_map</code> (if present in more than one, behaviour is undefined) </td></tr>
    <tr><td class="paramname">blob</td><td>blob that will be written, according to its entry on map. </td></tr>
    <tr><td class="paramname">cb</td><td>callback to be called when writing finishes. It contains status of writing: if failed, is lesser than zero. </td></tr>
    <tr><td class="paramname">data</td><td>user data to be sent to callback <code>cb</code> </td></tr>
  </table>
  </dd>
</dl>
<p>return 0 on success, a negative number on failure </p>

<p>References <a class="el" href="structsol__memmap__entry.html#ad746dbceecf4984779573e93bda290cc">sol_memmap_entry::size</a>, <a class="el" href="structsol__blob.html#aa708cb5e0186b24dc4eee1a4669577b7">sol_blob::size</a>, <a class="el" href="group__Log.html#gad3905aefbce3545adfc28d98defef899">SOL_INF</a>, <a class="el" href="group__Log.html#gacb48844cf78438b772f069c089836835">SOL_NULL_CHECK</a>, and <a class="el" href="group__Log.html#ga5d9529e9746395acc2cd96a28ffa1c28">SOL_WRN</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
